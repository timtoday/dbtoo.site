---
title :  debian 软件的安装与卸载
layout :  post
tags : 
- Linux
- debian
- deb
---
<div> <p>一基本配置</p><p>1. /etc/apt/sources.list文件的基本格式 : </p><p>deb <a href="http : //site.http.org/debian">http : //site.http.org/debian</a> distribution section1 section2 section3<br>deb-src <a href="http : //site.http.org/debian">http : //site.http.org/debian</a> distribution section1 section2</p><p>section3</p><p>deb 二进制程序包 deb-src 原代码程序包<br>例如 : </p><p>deb <a href="http : //http.us.debian.org/debian">http : //http.us.debian.org/debian</a> stable main contrib non-free<br>deb-src <a href="http : //non-us.debian.org/debian-non-US">http : //non-us.debian.org/debian-non-US</a> stable non-US</p><p>deb <a href="http : //non-us.debian.org/debian-non-US">http : //non-us.debian.org/debian-non-US</a> stable/non-US main contrib</p><p>non-free<br>deb-src <a href="http : //http.us.debian.org/debian">http : //http.us.debian.org/debian</a> stable main contrib non-free</p><p>apt 会忽略以"#"开头的行</p><p>注意 :  修改/etc/apt/sources.list后,应及时更新数据库列表</p><p>2.制作本地apt</p><p># mkdir /root/debs<br>将自己收集的.deb包考入/root/debs目录<br># dpkg-scanpackages debs| gzip &gt; debs/Packages.gz<br>在/etc/apt/sources.listdeb 加入 : <br>file : /root debs/</p><p>3.寻找速度最快的下载镜相 : netselect, netselect-apt</p><p>安装netselect软件包<br># apt-get install netselect<br>测试我使用的镜像<br># netselect security.debian.org   non-</p><p>us.debian.org people.debian.org gluck.debian.org<br>520 <br>#<br>看到了我所使用的镜像中 速度最快 得分为520 (得分越低越好)<br>你可以在这里查找debian的镜像列表</p><p><a href="http : //www.debian.org/mirror/mirrors_full">http : //www.debian.org/mirror/mirrors_full</a><br>你也可以用netselect-apt下载列表<br># ls sources.list<br>ls :  sources.list :  File or directory not found<br># netselect-apt stable<br>(...)<br># ls -l sources.list<br>sources.list<br>#<br>前提是你已经安装并运行了'wget'包</p><p>4.把CD-ROM加入到你的/etc/apt/sources.list文件</p><p>如果使用apt自动从CD-ROM上安装软件或升级系统,可以把它加</p><p>入/etc/apt/sources.list文件<br># apt-cdrom add</p><p>注 :  CD-ROM必须在/etc/fstab文件中已正确配置</p><p>二、管理包</p><p>1.apt系统使用一个数据库列表来记录系统已经安装了哪些软件，哪些没有安装，哪</p><p>些软件可以通过apt系统自动安装 apt-get通过分析这个数据库来决定如何安装软件</p><p>,<br>应该经常运行#apt-get update来更新此数据库</p><p>2.安装软件包<br># apt-get install packagename<br>apt-get的参数<br>-h This help text.<br>-d Download only - do NOT install or unpack archives<br>-f Attempt to continue if the integrity check fails<br>-s No-act. Perform ordering simulation<br>-y Assume Yes to all queries and do not prompt<br>-u Show a list of upgraded packages as well</p><p>软件包会被下载到/var/cache/apt/archives 稍后进行安装<br>如果一个软件包坏了，或者你只是想重新安装一个软件的最新版本 ，可以使用--</p><p>reinstall参数，如<br># apt-get --reinstall install gdm<br>在安装软件时，可以用apt-get install package/distribution或apt-get install</p><p>package=version来指定软件的安装版本，如<br># apt-get install nautilus/unstable</p><p>3.移除软件包<br>apt-get remove package<br># apt-get remove gnome-panel<br>这样就会移除gnome-panel以及对gnome-panel有依赖性的软件包，无法使用apt系统</p><p>仅仅移除此软件，而保留对它有依赖性的软件包。<br>apt-get remove package并不能移除这些软件的配置文件<br># apt-get --purge remove gnome-panel(这个很常用,注意前面是两横哟!)<br>就可以一块把他的配置文件移除</p><p>4.升级软件包<br>apt-get upgrade</p><p>5.升级到一个新的版本<br># apt-get -u dist-upgrade</p><p>6.移除无用的软件包<br>当安装软件时，软件包会被先下载到/var/cache/apt/archives/目录下，然后安装</p><p>。这样这个目录所占空间会越来越大，幸运的是apt提供了相应的管理工具<br>apt-get clean删除/var/cache/apt/archives/ 和</p><p>/var/cache/apt/archives/partial/目录下所有包(锁定的除外)。<br>apt-get autoclean仅删除不再能被下载的包</p><p>7.<br>8.如何维持一个混合的系统<br>鉴于testing版unstable版本比稳定,又比stable版本要新 ,很多人使用testing,可</p><p>是有些人想运行某个软件的最新版,却又不愿把这个系统升级为unstable,即想使用</p><p>一个混合的系统,那么可以这样做 : <br>在 /etc/apt/apt.conf 加入 : <br>APT :  : Default-Release "testing";<br>当要安装unstable软件时 加 -t 参数 : <br># apt-get -t unstable install packagename<br>注 : 不要忘记在/etc/apt/sources.list中加入相应的源</p><p>9.从一个特定的debian版本升级软<br># apt-get install `apt-show-versions -u -b | grep unstable`件</p><p>10.如何在软件升级时避免特定软件不会被升级<br>如果你使用的bebian版本在2.2以上,仅仅需要修改/etc/apt/preferences 文件<br>格式非常简单 : <br>Package :  Pin :  Priority : </p><p>例如我要保持gaim的0.58版本 只需加上 : <br>Package :  gaim<br>Pin :  version 0.58*<br>统配符 * 指锁定以0.58开头的所有版本 这就是说即使存在0.58-1 或类似 也不会</p><p>被安装<br>Priority(优先级)是可选项 默认 989<br>&lt;0 此软件永不会被安装<br>0~100 软件不被安装,不是有效的版本<br>&gt;100 此软件会被安装 即 如果有更新版本,软件会被升级<br>100~1000 软件不会被降级安装,例如 : 我安装的gaim 0.59 , 锁定gaim 0.58 ,优先</p><p>级为999<br>那么0.58就不会被安装 ,如果要降级安装 则优先级许大于 1000</p><p>获取软件信息</p><p>1.搜寻软件名<br># apt-cache search gaim<br>软件信息<br># apt-cache show gaim<br>如果已经安装,并且又有了新版本,那么都会显示,安装版本在后<br>获取更多信息<br># apt-cache showpkg gaim<br>查询软件的依赖性<br># apt-cache depends gaim</p><p>2.用dpkg查询软件名<br>根据某一个文件查询软件名<br># dpkg -S stdio.h</p><p>3.询问式安装<br># auto-apt run command</p><p>4.查询文件的归属<br># apt-file search filename<br>就象dpkg -S 但可以查询,但可以查未安装软件包<br>也可以查询一个包所含文件<br># apt-file list packagename<br>它会用到数据库所以要及时更新<br># apt-file update</p><p>程序源文件</p><p>1.下载程序源码<br># apt-get source packagename<br>这样就会下载三个文件 a .orig.tar.gz, a .dsc 和 a .diff.gz<br>下载后自动打包<br># apt-get -b source packagename</p><p>2.编译软件<br># apt-get build-dep gmc<br>下载所编译包的依赖程序</p><p> </p> </div>
