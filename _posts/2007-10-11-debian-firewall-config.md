---
title: debian 下防火墙iptables配置
layout: post
tags:
- Linux
- debian
- deb
- Firewall
---
<div> <p>由于iptable配置很麻烦, 所以将一些简单的配置信息放在这里, 已被以后使用</p><p> </p><p>防火墙配置</p><p>要保证服务器安全，防火墙是少不了的，用 root 帐号执行：</p><p>iptables -F<br>iptables -N FIREWALL<br>iptables -F FIREWALL<br>iptables -A INPUT -j FIREWALL<br>iptables -A FORWARD -j FIREWALL<br>iptables -A FIREWALL -p tcp -m tcp --dport 993 --syn -j ACCEPT<br>iptables -A FIREWALL -p tcp -m tcp --dport 995 --syn -j ACCEPT<br>iptables -A FIREWALL -p tcp -m tcp --dport 110 --syn -j ACCEPT<br>iptables -A FIREWALL -p tcp -m tcp --dport 143 --syn -j ACCEPT<br>iptables -A FIREWALL -p tcp -m tcp --dport 80 --syn -j ACCEPT<br>iptables -A FIREWALL -p tcp -m tcp --dport 443 --syn -j ACCEPT<br>iptables -A FIREWALL -p tcp -m tcp --dport 465 --syn -j ACCEPT<br>iptables -A FIREWALL -p tcp -m tcp --dport 22 --syn -j ACCEPT<br>iptables -A FIREWALL -p tcp -m tcp --dport 25 --syn -j ACCEPT<br>iptables -A FIREWALL -i lo -j ACCEPT<br>iptables -A FIREWALL -p udp -m udp --sport 53 -j ACCEPT<br>iptables -A FIREWALL -p udp -m udp --dport 161 -j ACCEPT<br>iptables -A FIREWALL -p udp -m udp --sport 6277 -j ACCEPT<br>iptables -A FIREWALL -p udp -m udp --sport 24441 -j ACCEPT<br>iptables -A FIREWALL -p tcp -m tcp --syn -j REJECT<br>iptables -A FIREWALL -p udp -m udp -j REJECT<br>iptables-save &gt; /etc/firewall-rules<br>iptables-restore &lt; /etc/firewall-rules<br>我这里设置的相对宽松一些，22 端口对所有 IP 都开放了，为的是方便管理。161 端口是 snmp 端口，我开这个是为了远程监控，所以是可选项。 6277、24441 这几个端口是 Razor/Pyzor/DCC/SA 要访问的端口。</p><p>执行</p><p>iptables -L<br>可以看到你设定的规则，如果不对，可以用 iptables -F 清空，然后重设。</p><p>如果想要开机运行，那么编辑 /etc/network/interfaces，在 iface lo inet loopback 之后加入：</p><p>pre-up iptables-restore &lt; /etc/firewall-rules<br> 或者是放在启动脚本里: /etc/init.d/bootmisc.sh<br>这里是iptables的一些资料, 介绍的很详细:<br><a href="http://man.chinaunix.net/network/iptables-tutorial-cn-1.1.19.html">http://man.chinaunix.net/network/iptables-tutorial-cn-1.1.19.html</a> (iptables使用指南)</p><p><a href="http://linux.ccidnet.com/pub/html/tech/iptables/index.htm">http://linux.ccidnet.com/pub/html/tech/iptables/index.htm</a></p> 
