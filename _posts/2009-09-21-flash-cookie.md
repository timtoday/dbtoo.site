---
title : flash 版 cookie
layout :  post
tags : 
- Flash
---
<div> class  as2.util.Cookie {  <br/> <br/>     private var _time : Number;  <br/>     private var _name : String;  <br/>     private var _so : SharedObject;  <br/> <br/>     public function Cookie(name : String,time : Number){          <br/>         _name = (name == undefined)?"klstudio" : name;  <br/>         _time = (time == undefined)?36000 : time;  <br/>         _so = SharedObject.getLocal(_name,"/");  <br/>     }  <br/> <br/>     public function clearTimeOut() : Void{  <br/>         var obj : Object = _so.data.cookie;  <br/>         if(obj == undefined){  <br/>             return;  <br/>         }  <br/>         for(var key in obj){  <br/>             if(obj[key] == undefined || obj[key].time == undefined || isTimeOut(obj[key].time)){  <br/>                 delete obj[key];  <br/>             }  <br/>         }  <br/>         _so.data.cookie = obj;  <br/>         _so.flush();  <br/>     }  <br/>     private function isTimeOut(time : Number) : Boolean{  <br/>         var today : Date = new Date();          <br/>         return time + _time * 1000 &lt; today.getTime();  <br/>     }  <br/> <br/>     public function getTime() : Number{  <br/>         return _time;  <br/>     }     <br/>     public function getName() : String{  <br/>         return _name;  <br/>     }  <br/>     public function clear() : Void{  <br/>         _so.clear();  <br/>     }     <br/>     public function put(key : String,value : Object) : Void{  <br/>         var today : Date = new Date();  <br/>         key = "key_"+key;  <br/>         value.time = today.getTime();  <br/>         if(_so.data.cookie == undefined){  <br/>             var obj : Object = {};  <br/>             obj[key] = value;  <br/>             _so.data.cookie = obj;  <br/>         }else{  <br/>             _so.data.cookie[key] = value;  <br/>         }  <br/>         _so.flush();  <br/>     }  <br/>     public function remove(key : String) : Void {  <br/>         if (contains(key)) {  <br/>             delete _so.data.cookie["key_" + key];  <br/>             _so.flush();  <br/>         }  <br/>     }  <br/>     public function get(key : String) : Object{       <br/>         return contains(key)?_so.data.cookie["key_"+key] : null;  <br/>     }     <br/>     public function contains(key : String) : Boolean{  <br/>         key = "key_" + key;   <br/>         return _so.data.cookie != undefined &amp;&amp; _so.data.cookie[key] != undefined;  <br/>     }  <br/> }<br/>//调用方法 : <br/>import as2.util.Cookie;  <br/> <br/> //创建cookie对象,超时单位为毫秒;  <br/> var cookie : Cookie = new Cookie("myCookie", 24 * 60 * 60 * 1000);  <br/> //添加key值;  <br/> cookie.put("a", {a : "a0001"});  <br/> cookie.put("b", {b : 2});  <br/> //查key���否��在;  <br/> trace(cookie.contains("a"));  <br/> //删除key;  <br/> cookie.remove("a");  <br/> trace(cookie.contains("a"));  <br/> //获取key的值  <br/> trace(cookie.get("b").b);  <br/> //清除cookie所有的值;  <br/> cookie.clear(); </div>